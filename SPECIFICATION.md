# Kairu AI for Chrome Extension - ä»•æ§˜æ›¸

## æ¦‚è¦

Kairu AI for Chrome Extensionã¯ã€OpenAI APIã‚’ä½¿ç”¨ã—ã¦ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã‚’è‡ªå‹•åŒ–ã™ã‚‹Chromeæ‹¡å¼µæ©Ÿèƒ½ã§ã™ã€‚ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯è‡ªç„¶è¨€èªžã§æŒ‡ç¤ºã‚’å‡ºã™ã“ã¨ã§ã€ãƒ–ãƒ©ã‚¦ã‚¶ä¸Šã§ã®æ“ä½œã‚’è‡ªå‹•åŒ–ã§ãã¾ã™ã€‚

## æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

- **è¨€èªž**: TypeScript
- **ãƒ“ãƒ«ãƒ‰ãƒ„ãƒ¼ãƒ«**: Webpack
- **ãƒžãƒ‹ãƒ•ã‚§ã‚¹ãƒˆ**: Chrome Extension Manifest V3
- **API**: OpenAI Chat Completions API (gpt-5-nano)
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: Chrome Storage API

## ä¸»è¦æ©Ÿèƒ½

### 1. UI ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### ã‚«ã‚¤ãƒ«ãã‚“ï¼ˆã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ï¼‰
- **ãƒ‡ã‚¶ã‚¤ãƒ³**: ðŸ¬ çµµæ–‡å­—ã‚’ä½¿ç”¨ã—ãŸå††å½¢ã‚¢ãƒã‚¿ãƒ¼
- **é…è‰²**: æ°´è‰²ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (`#43a5f5` â†’ `#1e88e5`)
- **ä½ç½®**: ç”»é¢å³ä¸‹ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: `bottom: 20px, right: 20px`ï¼‰
- **æ©Ÿèƒ½**:
  - ã‚¯ãƒªãƒƒã‚¯ã§ãƒ‘ãƒãƒ«ã®é–‹é–‰
  - ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—ã§ä½ç½®å¤‰æ›´
  - AIå‡¦ç†ä¸­ã¯æŒ¯ã‚Šå­ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`pendulum`ï¼‰
  - ã‚¯ãƒªãƒƒã‚¯æ™‚ã¯å›žè»¢ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³ï¼ˆ`spin`ã€åæ™‚è¨ˆå›žã‚Š360åº¦ï¼‰
  - å½±ã¯å›žè»¢ã›ãšå›ºå®š

#### æ“ä½œãƒ‘ãƒãƒ«
- **è¡¨ç¤ºåˆ‡æ›¿**:
  - ã‚«ã‚¤ãƒ«ãã‚“ã‚’ã‚¯ãƒªãƒƒã‚¯
  - `Command + K` (Mac) / `Ctrl + K` (Windows/Linux)
- **æ§‹æˆè¦ç´ **:
  - ãƒ˜ãƒƒãƒ€ãƒ¼: "Kairuãã‚“" + ã‚´ãƒŸç®±ã‚¢ã‚¤ã‚³ãƒ³ï¼ˆä¼šè©±å±¥æ­´ãƒªã‚»ãƒƒãƒˆï¼‰
  - ãƒãƒ£ãƒƒãƒˆå±¥æ­´è¡¨ç¤ºã‚¨ãƒªã‚¢
  - ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›æ¬„
  - é€ä¿¡ãƒœã‚¿ãƒ³
  - å®Ÿè¡Œãƒ­ã‚°ï¼ˆæŠ˜ã‚ŠãŸãŸã¿å¯èƒ½ï¼‰
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤ºã‚¨ãƒªã‚¢

### 2. ä¼šè©±ç®¡ç†

#### ä¼šè©±å±¥æ­´
- **ä¿å­˜ä»¶æ•°**: æœ€å¤§1000ä»¶
- **ä¿å­˜å†…å®¹**: ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **æ°¸ç¶šåŒ–**: Chrome Storage API
- **ãƒªã‚»ãƒƒãƒˆ**: ã‚´ãƒŸç®±ãƒœã‚¿ãƒ³ã§ä¼šè©±å±¥æ­´ã¨å®Ÿè¡Œãƒ­ã‚°ã‚’åŒæ™‚å‰Šé™¤

#### ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º
- **ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: æ°´è‰²ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³èƒŒæ™¯ï¼ˆå³å¯„ã›ï¼‰
- **ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸**: ã‚°ãƒ¬ãƒ¼èƒŒæ™¯ï¼ˆå·¦å¯„ã›ï¼‰
- **æ–‡å­—è‰²**: `!important`ã§å¼·åˆ¶æŒ‡å®šï¼ˆãƒ€ãƒ¼ã‚¯ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œï¼‰

### 3. å®Ÿè¡Œãƒ­ã‚°

- **ä¿å­˜ä»¶æ•°**: æœ€å¤§100ä»¶
- **ãƒ­ã‚°ã‚¿ã‚¤ãƒ—**: info, success, error, warning
- **è¡¨ç¤ºå†…å®¹**: ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ— + ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
- **Rawè¡¨ç¤º**: JSONç­‰ã®ç”Ÿãƒ‡ãƒ¼ã‚¿ã‚’æŠ˜ã‚ŠãŸãŸã¿è¡¨ç¤º

### 4. ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œ

#### å¯¾å¿œã‚¢ã‚¯ã‚·ãƒ§ãƒ³
1. **click**: è¦ç´ ã‚’ã‚¯ãƒªãƒƒã‚¯
   - `selector`ã¾ãŸã¯`text`ã§æŒ‡å®š
2. **type**: ãƒ•ã‚©ãƒ¼ãƒ ã«å…¥åŠ›
3. **navigate**: ãƒšãƒ¼ã‚¸é·ç§»
4. **scroll**: ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ï¼ˆup/downï¼‰
5. **back**: ãƒ–ãƒ©ã‚¦ã‚¶ã®æˆ»ã‚‹
6. **forward**: ãƒ–ãƒ©ã‚¦ã‚¶ã®é€²ã‚€
7. **get_info**: ãƒšãƒ¼ã‚¸æƒ…å ±å–å¾—

#### è¦ç´ æ¤œå‡º
- **å¯è¦–æ€§ãƒã‚§ãƒƒã‚¯**:
  - `display !== "none"`
  - `visibility !== "hidden"`
  - `opacity !== "0"`
  - `offsetWidth > 0`
  - `offsetHeight > 0`
- **é™¤å¤–**: Kairu UIã®è¦ç´ ã¯æ¤œå‡ºå¯¾è±¡å¤–

#### ãƒšãƒ¼ã‚¸æƒ…å ±é€ä¿¡
- **ã‚¤ãƒ³ã‚¿ãƒ©ã‚¯ãƒ†ã‚£ãƒ–è¦ç´ **: input, button, a, selectç­‰ã®ãƒªã‚¹ãƒˆ
- **HTMLæ§‹é€ **: ãƒšãƒ¼ã‚¸å…¨ä½“ã®HTMLï¼ˆæœ€å¤§300,000æ–‡å­—ï¼‰
- **é€ä¿¡ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ¯Žå›žãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§é€ä¿¡

### 5. AIå‡¦ç†

#### ãƒ¢ãƒ‡ãƒ«è¨­å®š
- **ãƒ¢ãƒ‡ãƒ«**: gpt-5-nano
- **ä¼šè©±å±¥æ­´**: æœ€å¤§1000ä»¶ã‚’å«ã‚ã¦é€ä¿¡
- **ã‚·ã‚¹ãƒ†ãƒ ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ**: ãƒ–ãƒ©ã‚¦ã‚¶æ“ä½œã®æŒ‡ç¤ºã‚’å«ã‚€

#### å¿œç­”å½¢å¼
```json
{
  "message": "ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¸ã®èª¬æ˜Ž",
  "actions": [
    {"action": "type", "selector": "input[name='q']", "value": "æ¤œç´¢ãƒ¯ãƒ¼ãƒ‰"},
    {"action": "click", "text": "æ¤œç´¢"}
  ]
}
```

#### ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å®Ÿè¡Œ
- **é–“éš”**: å„ã‚¢ã‚¯ã‚·ãƒ§ãƒ³é–“800ms
- **AIæ“ä½œãƒ¢ãƒ¼ãƒ‰**: å®Ÿè¡Œä¸­ã¯`isAIOperating = true`

### 6. ä½ç½®ç®¡ç†

#### ãƒ‰ãƒ©ãƒƒã‚°&ãƒ‰ãƒ­ãƒƒãƒ—
- **é–‹å§‹**: `mousedown`ã§ãƒ‰ãƒ©ãƒƒã‚°é–‹å§‹
- **ç§»å‹•**: `mousemove`ã§ä½ç½®æ›´æ–°
- **çµ‚äº†**: `mouseup`ã§ä½ç½®ä¿å­˜
- **ã‚¯ãƒªãƒƒã‚¯åˆ¤å®š**: ç§»å‹•è·é›¢5pxæœªæº€ã¯ã‚¯ãƒªãƒƒã‚¯ã¨ã—ã¦æ‰±ã†

#### ç§»å‹•åˆ¶é™
- **å³ç«¯**: `right >= 0`
- **å·¦ç«¯**: `right <= window.innerWidth - containerWidth`
- **ä¸‹ç«¯**: `bottom >= 0`
- **ä¸Šç«¯**: `bottom <= window.innerHeight - containerHeight`

#### ä½ç½®ä¿å­˜
- **å½¢å¼**: `{bottom: number, right: number}`
- **ä¿å­˜å…ˆ**: Chrome Storage API
- **å¾©å…ƒ**: ãƒšãƒ¼ã‚¸ãƒ­ãƒ¼ãƒ‰æ™‚ã«è‡ªå‹•å¾©å…ƒ

### 7. ãƒšãƒ¼ã‚¸æ“ä½œåˆ¶é™

#### Kairuãƒ¢ãƒ¼ãƒ‰æœ‰åŠ¹æ™‚
- **ã‚¯ãƒªãƒƒã‚¯**: ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆKairu UIé™¤ãï¼‰
- **ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰**: ãƒ–ãƒ­ãƒƒã‚¯ï¼ˆKairu UIé™¤ãï¼‰
- **ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«**: `body { overflow: hidden }` ã§å®Œå…¨ãƒ–ãƒ­ãƒƒã‚¯
- **AIæ“ä½œä¸­**: ä¸€æ™‚çš„ã«åˆ¶é™è§£é™¤

#### ã‚¤ãƒ™ãƒ³ãƒˆãƒ–ãƒ­ãƒƒã‚¯
- click, mousedown, mouseup
- keydown, keypress, keyup
- submit

### 8. ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ç®¡ç†

#### ä¿å­˜ãƒ‡ãƒ¼ã‚¿
- `kairu_logs`: å®Ÿè¡Œãƒ­ã‚°HTML
- `kairu_chat_history`: ãƒãƒ£ãƒƒãƒˆå±¥æ­´HTML
- `kairu_enabled`: Kairuãƒ¢ãƒ¼ãƒ‰ã®æœ‰åŠ¹/ç„¡åŠ¹
- `kairu_conversation`: ä¼šè©±å±¥æ­´ï¼ˆæœ€å¤§1000ä»¶ï¼‰
- `kairu_position`: ãƒ‘ãƒãƒ«ä½ç½®ï¼ˆbottom, rightï¼‰

#### ãƒ‡ãƒ¼ã‚¿åˆ¶é™
- **ä¼šè©±å±¥æ­´**: 1000ä»¶ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤
- **å®Ÿè¡Œãƒ­ã‚°**: 100ä»¶ã‚’è¶…ãˆãŸã‚‰å¤ã„ã‚‚ã®ã‹ã‚‰å‰Šé™¤
- **HTMLé•·**: 300,000æ–‡å­—ã‚’è¶…ãˆãŸã‚‰åˆ‡ã‚Šè©°ã‚

### 9. ã‚¹ã‚¿ã‚¤ãƒªãƒ³ã‚°

#### ã‚«ãƒ©ãƒ¼ãƒ‘ãƒ¬ãƒƒãƒˆ
- **ãƒ—ãƒ©ã‚¤ãƒžãƒª**: æ°´è‰²ã‚°ãƒ©ãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³ (`#43a5f5` â†’ `#1e88e5`)
- **èƒŒæ™¯**: åŠé€æ˜Žç™½ + ãƒ–ãƒ©ãƒ¼åŠ¹æžœ
- **ãƒ†ã‚­ã‚¹ãƒˆ**:
  - ãƒ¦ãƒ¼ã‚¶ãƒ¼: `white`
  - ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ: `#333`
  - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹: `#666`

#### ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³
- **æŒ¯ã‚Šå­**: AIå‡¦ç†ä¸­ã€Â±15åº¦å›žè»¢ã€1ç§’å‘¨æœŸ
- **å›žè»¢**: ã‚¯ãƒªãƒƒã‚¯æ™‚ã€åæ™‚è¨ˆå›žã‚Š360åº¦ã€0.5ç§’
- **ãƒ‘ãƒãƒ«è¡¨ç¤º**: ä¸‹ã‹ã‚‰ã‚¹ãƒ©ã‚¤ãƒ‰ã‚¢ãƒƒãƒ—ã€0.3ç§’
- **ãƒ‘ãƒ‡ã‚£ãƒ³ã‚°**: loadingæ™‚ã®ã¿2pxï¼ˆ0.3ç§’ãƒˆãƒ©ãƒ³ã‚¸ã‚·ãƒ§ãƒ³ï¼‰

#### ã‚«ãƒ¼ã‚½ãƒ«
- **é€šå¸¸**: `grab`
- **ãƒ‰ãƒ©ãƒƒã‚°ä¸­**: `grabbing`

### 10. ã‚­ãƒ¼ãƒœãƒ¼ãƒ‰ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆ

- **ãƒ‘ãƒãƒ«é–‹é–‰**: `Command + K` (Mac) / `Ctrl + K` (Windows/Linux)
- **ãƒ‘ãƒãƒ«é–‹ã„ãŸæ™‚**: è‡ªå‹•çš„ã«å…¥åŠ›æ¬„ã«ãƒ•ã‚©ãƒ¼ã‚«ã‚¹

## ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ

```
kairu-ai-for-chrome-extension/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ content.ts      # ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â”œâ”€â”€ background.ts   # ãƒãƒƒã‚¯ã‚°ãƒ©ã‚¦ãƒ³ãƒ‰ã‚¹ã‚¯ãƒªãƒ—ãƒˆ
â”‚   â””â”€â”€ popup.ts        # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—UI
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ popup.html      # ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—HTML
â”‚   â””â”€â”€ icons/          # æ‹¡å¼µæ©Ÿèƒ½ã‚¢ã‚¤ã‚³ãƒ³
â”œâ”€â”€ manifest.json       # ãƒžãƒ‹ãƒ•ã‚§ã‚¹ãƒˆãƒ•ã‚¡ã‚¤ãƒ«
â”œâ”€â”€ webpack.config.js   # Webpackè¨­å®š
â”œâ”€â”€ tsconfig.json       # TypeScriptè¨­å®š
â”œâ”€â”€ .gitignore         # Gité™¤å¤–è¨­å®š
â””â”€â”€ package.json       # npmè¨­å®š
```

## ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£

- **APIã‚­ãƒ¼**: Chrome Storage APIã§ä¿å­˜
- **HTTPS**: OpenAI APIã¯HTTPSé€šä¿¡
- **Content Security Policy**: Manifest V3ã«æº–æ‹ 
- **Permissions**: activeTab, storage, scripting

## åˆ¶é™äº‹é …

- **HTMLé•·åˆ¶é™**: 300,000æ–‡å­—ã¾ã§
- **ä¼šè©±å±¥æ­´**: 1000ä»¶ã¾ã§
- **å®Ÿè¡Œãƒ­ã‚°**: 100ä»¶ã¾ã§
- **ãƒˆãƒ¼ã‚¯ãƒ³æŽ¨å®š**: æ–‡å­—æ•° Ã· 4ï¼ˆæ¦‚ç®—ï¼‰
- **æ“ä½œé–“éš”**: 800mså›ºå®š

## ä»Šå¾Œã®æ‹¡å¼µå¯èƒ½æ€§

- [ ] ã‚«ã‚¹ã‚¿ãƒ ã‚¢ã‚¯ã‚·ãƒ§ãƒ³ã®è¿½åŠ 
- [ ] è¤‡æ•°ã®AIãƒ¢ãƒ‡ãƒ«å¯¾å¿œ
- [ ] ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ/ã‚¤ãƒ³ãƒãƒ¼ãƒˆæ©Ÿèƒ½
- [ ] ã‚·ãƒ§ãƒ¼ãƒˆã‚«ãƒƒãƒˆã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º
- [ ] ãƒ†ãƒ¼ãƒžã®ã‚«ã‚¹ã‚¿ãƒžã‚¤ã‚º
- [ ] å¤šè¨€èªžå¯¾å¿œ
